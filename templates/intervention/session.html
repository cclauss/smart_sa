{% extends "base.html" %}

{% block title %}session.html{% endblock %}

{% load participant_status %}

{% block breadcrumb-main %}
<div id="breadcrumb-main">
	<a href="/intervention/">Home</a> &rarr; Intervene &rarr; Working with <b>{{participant.name}}</b> 
</div>
{% endblock %}

{% block breadcrumb-session %}
{%if session %}
<div id="breadcrumb">
	<span id="endintervention"><a class="action" style="padding: 2px;" href="#" onclick="document['completesession'].submit()">End Session {{ session.index }}</a></span> 	   
	<form style="display: none;" name="completesession" action="complete/" method="post"></form>
      <a class="incomplete" id="tab-home" href="/intervention/{{session.intervention.id}}/">Sessions</a>
</div>
{%endif%}  
    {% if participant.is_practice %}
    <div class="practice-mode">Practice Mode - This intervention is for demonstration purposes only.</div>
    {% endif %}
{% endblock %}

{% block content %}
    {{ block.super }}
    
    {% if session %}

      <!--
      <h2 id="session{{session.id}}" class="{% get_participant_status participant session %} sessiontitle">Session {{ session.index }}: {{ session.long_title }}</h2>
	-->
      <h2>Session {{ session.index }}: {{ session.long_title }}</h2>

      {% if session.introductory_copy %}
	<p class="instructions">{{session.introductory_copy|safe}}</p><hr />
      {% endif %}
      {% if activities %}   
      
       <p class="instructions">
	 Now, click on an activity for {{participant.name}} to work on.
	  </p>
	  
   	<div id="navigator">
	  <ul class="primary">
        {% for s in session.intervention.clientsession_set.all %}
	{% if not s.defaulter or participant.defaulter %}
	   <li><a id="session{{s.index }}" class="session {% get_participant_status participant s %} {% ifequal session.id s.id %}current{% endifequal %}" href="/session/{{s.id }}/">
	     Session {{forloop.counter}}: {{ s.long_title }}
	    </a></li>
	{% endif %}
        {% endfor %}
	  </ul>
	  <ul class="secondary">
        {% for activity in activities %}
	   <li><a id="activity{{activity.index }}" class="activity {% get_participant_status participant activity %}" href="/activity/{{activity.id }}/">
	     Activity {{forloop.counter}}: {{ activity.short_title }}</a>
	     {% if activity.game %}<span class="task">+Task</span>{% endif %}
           </li>
        {% endfor %}
	  </ul>
	</div>

       {% else  %}
         <p>No activities defined for this session.</p>
       {% endif %}

<br style="clear: both;" /> 
    </div>
{% else %}
    <p>No session defined.</p>
{% endif %}

{% endblock %}
